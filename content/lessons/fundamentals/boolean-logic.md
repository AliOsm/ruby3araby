# المنطق البولياني

بعد أن تعلمنا عمليات المقارنة التي تُرجع `true` أو `false`، حان الوقت لنتعلم كيف **نجمع** هذه الشروط معاً! المنطق البولياني (Boolean Logic) يسمح لنا ببناء شروط معقدة من شروط بسيطة.

## ما هو المنطق البولياني؟

المنطق البولياني هو نظام منطقي يتعامل مع قيمتين فقط: **صحيح** (`true`) و **خاطئ** (`false`). سُمي نسبة للعالم جورج بول (George Boole).

في البرمجة، نستخدم ثلاث عمليات أساسية:
- **و** (AND): كلا الشرطين يجب أن يكونا صحيحين
- **أو** (OR): أحد الشرطين على الأقل يجب أن يكون صحيحاً
- **ليس** (NOT): عكس القيمة

## عامل "و" - && (AND)

عامل `&&` يُرجع `true` فقط إذا كان **كلا الشرطين صحيحين**:

```ruby
# كلاهما صحيح
puts true && true
# الثاني خاطئ
puts true && false
# الأول خاطئ
puts false && true
# كلاهما خاطئ
puts false && false
```

الناتج:
```
true
false
false
false
```

**جدول حقيقة &&:**

| الشرط الأول | الشرط الثاني | النتيجة |
|-------------|-------------|---------|
| true | true | true |
| true | false | false |
| false | true | false |
| false | false | false |

### مثال عملي: التحقق من العمر والرصيد

```ruby
age = 25
balance = 1000

# هل الشخص بالغ ولديه رصيد كافٍ؟
can_purchase = age >= 18 && balance >= 500
puts can_purchase
```

الناتج:
```
true
```

### مثال: نطاق العمر

```ruby
age = 35

# هل العمر بين 18 و 65؟
is_working_age = age >= 18 && age <= 65
puts "في سن العمل: " + is_working_age.to_s
```

الناتج:
```
في سن العمل: true
```

## عامل "أو" - || (OR)

عامل `||` يُرجع `true` إذا كان **أحد الشرطين على الأقل صحيحاً**:

```ruby
# كلاهما صحيح
puts true || true
# الأول صحيح
puts true || false
# الثاني صحيح
puts false || true
# كلاهما خاطئ
puts false || false
```

الناتج:
```
true
true
true
false
```

**جدول حقيقة ||:**

| الشرط الأول | الشرط الثاني | النتيجة |
|-------------|-------------|---------|
| true | true | true |
| true | false | true |
| false | true | true |
| false | false | false |

### مثال عملي: التحقق من الصلاحيات

```ruby
is_admin = false
is_owner = true

# هل يمكنه التعديل؟ (المدير أو المالك يمكنهم ذلك)
can_edit = is_admin || is_owner
puts "يمكنه التعديل: " + can_edit.to_s
```

الناتج:
```
يمكنه التعديل: true
```

### مثال: عطلة نهاية الأسبوع

```ruby
day = "السبت"

# هل اليوم عطلة؟
is_weekend = day == "الجمعة" || day == "السبت"
puts "عطلة: " + is_weekend.to_s
```

الناتج:
```
عطلة: true
```

## عامل "ليس" - ! (NOT)

عامل `!` يعكس القيمة المنطقية:

```ruby
# عكس صحيح
puts !true
# عكس خاطئ
puts !false
```

الناتج:
```
false
true
```

### مثال عملي: التحقق من عدم وجود خطأ

```ruby
has_error = false

# هل النظام يعمل بشكل سليم؟
is_ok = !has_error
puts "النظام سليم: " + is_ok.to_s
```

الناتج:
```
النظام سليم: true
```

### مثال: التحقق من القائمة

```ruby
is_empty = true

# هل القائمة ليست فارغة؟
has_items = !is_empty
puts "القائمة تحتوي على عناصر: " + has_items.to_s
```

الناتج:
```
القائمة تحتوي على عناصر: false
```

## دمج العمليات المنطقية

يمكنك دمج عدة عمليات منطقية معاً لبناء شروط معقدة:

```ruby
age = 30
has_license = true
has_car = false

# هل يمكنه القيادة؟
# يجب أن يكون بالغاً ولديه رخصة ولديه سيارة
can_drive = age >= 18 && has_license && has_car
puts "يمكنه القيادة: " + can_drive.to_s
```

الناتج:
```
يمكنه القيادة: false
```

### مثال: نظام التسجيل

```ruby
username = "ahmed"
password = "secret123"
email = "ahmed@example.com"

# التحقق من صحة البيانات
has_username = username.length >= 3
has_password = password.length >= 8
has_email = email.include?("@")

is_valid = has_username && has_password && has_email
puts "البيانات صحيحة: " + is_valid.to_s
```

الناتج:
```
البيانات صحيحة: true
```

## أولوية العمليات المنطقية

ترتيب الأولوية من الأعلى للأدنى:
1. `!` (NOT) - أعلى أولوية
2. `&&` (AND)
3. `||` (OR) - أدنى أولوية

```ruby
# بدون أقواس
# && تُنفذ أولاً
puts true || false && false
# يصبح: true || (false && false)
# يصبح: true || false
# النتيجة: true

# مع أقواس لتوضيح القصد
# الأقواس أولاً
puts (true || false) && false
# يصبح: true && false
# النتيجة: false
```

الناتج:
```
true
false
```

> **نصيحة:** استخدم الأقواس دائماً لتوضيح قصدك، حتى لو لم تكن ضرورية!

## الفرق بين && و and، || و or

روبي توفر طريقتين للكتابة:
- `&&` و `||` (أولوية عالية)
- `and` و `or` (أولوية منخفضة)

```ruby
# && و || أولويتهما أعلى من =
result = true || false
# true
puts result

# and و or أولويتهما أقل من =
# هذا قد يسبب نتائج غير متوقعة!
```

### الاختلاف في الأولوية

```ruby
# باستخدام &&
a = true && false
# false (تم حساب && أولاً ثم التعيين)
puts a

# باستخدام and
b = true and false
# true (تم التعيين أولاً لأن and أولويته أقل!)
puts b
```

الناتج:
```
false
true
```

> **تحذير:** يُنصح باستخدام `&&` و `||` في الشروط دائماً لتجنب الالتباس!

### متى نستخدم and و or؟

تُستخدم `and` و `or` أحياناً للتحكم في التدفق:

```ruby
# مثال: افعل شيئاً أو أظهر رسالة خطأ
# puts "نجاح" or puts "فشل"

# لكن في الشروط، استخدم && و || دائماً
```

## جدول المقارنة

| العامل | الوصف | الأولوية | الاستخدام المُوصى |
|--------|-------|----------|-----------------|
| `&&` | AND (و) | عالية | ✅ للشروط |
| `\|\|` | OR (أو) | عالية | ✅ للشروط |
| `!` | NOT (ليس) | أعلى | ✅ دائماً |
| `and` | AND (و) | منخفضة | ⚠️ للتحكم في التدفق |
| `or` | OR (أو) | منخفضة | ⚠️ للتحكم في التدفق |

## التقييم الكسول (Short-circuit Evaluation)

روبي تستخدم "التقييم الكسول" - أي أنها تتوقف عن التقييم بمجرد معرفة النتيجة:

### مع &&

```ruby
# إذا كان الشرط الأول false، لا حاجة لفحص الثاني
puts false && (puts "لن تظهر هذه الرسالة")
```

الناتج:
```
false
```

لم تظهر الرسالة لأن الشرط الأول `false`، وبالتالي النتيجة حتماً `false`.

### مع ||

```ruby
# إذا كان الشرط الأول true، لا حاجة لفحص الثاني
puts true || (puts "لن تظهر هذه الرسالة")
```

الناتج:
```
true
```

لم تظهر الرسالة لأن الشرط الأول `true`، وبالتالي النتيجة حتماً `true`.

## أمثلة عملية متقدمة

### نظام تسعير

```ruby
age = 15
is_student = true
is_member = false

# الأطفال (أقل من 12) أو الطلاب يحصلون على خصم
gets_discount = age < 12 || is_student
puts "يحصل على خصم: " + gets_discount.to_s

# الأعضاء البالغين فقط يمكنهم التصويت
can_vote = age >= 18 && is_member
puts "يمكنه التصويت: " + can_vote.to_s
```

الناتج:
```
يحصل على خصم: true
يمكنه التصويت: false
```

### التحقق من كلمة المرور

```ruby
password = "MyP@ss123"

has_length = password.length >= 8
has_upper = password.match?(/[A-Z]/)
has_lower = password.match?(/[a-z]/)
has_number = password.match?(/[0-9]/)

is_strong = has_length && has_upper && has_lower && has_number
puts "كلمة المرور قوية: " + is_strong.to_s
```

الناتج:
```
كلمة المرور قوية: true
```

## نصائح مهمة

1. **استخدم `&&` و `||`** للشروط بدلاً من `and` و `or`
2. **استخدم الأقواس** لتوضيح الأولوية
3. **استفد من التقييم الكسول** لتحسين الأداء
4. **قسّم الشروط المعقدة** إلى متغيرات منفصلة لسهولة القراءة
5. **اختبر جميع الحالات** عند كتابة شروط معقدة

## تمرين: المنطق البولياني

حان وقت التطبيق! في محرر الشيفرة على اليسار:

**المطلوب:**
1. عرّف المتغيرات التالية:
   - `x = 10`
   - `y = 5`
   - `z = 15`

2. اطبع نتيجة: هل x أكبر من y **و** x أصغر من z؟
3. اطبع نتيجة: هل y يساوي 10 **أو** z يساوي 15؟
4. اطبع نتيجة: عكس (x يساوي y)
5. اطبع نتيجة: هل (x أكبر من y) **و** (y أكبر من 0 **أو** z يساوي 20)؟

الناتج المتوقع:
```
true
true
true
true
```

> **تلميح:** استخدم `&&` للـ "و"، `||` للـ "أو"، و `!` للعكس. استخدم الأقواس لتجميع الشروط!

---

> **تذكّر:** المنطق البولياني هو أساس اتخاذ القرارات في البرمجة. كل جملة `if` تستخدم هذه المفاهيم!
