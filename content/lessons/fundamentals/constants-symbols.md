# الثوابت والرموز

في الدرس السابق تعلمنا عن المتغيرات التي يمكن تغيير قيمتها. لكن ماذا لو أردنا قيمة لا تتغير أبداً؟ وماذا عن القيم التي نستخدمها كـ"علامات" أو "مفاتيح"؟ هنا يأتي دور **الثوابت** (Constants) و**الرموز** (Symbols)!

## الثوابت (Constants)

**الثابت** هو قيمة لا يُفترض تغييرها بعد تعريفها. في روبي، نُعرّف الثوابت بكتابة اسمها بحروف كبيرة (UPPERCASE):

```ruby
PI = 3.14159
MAX_USERS = 100
APP_NAME = "روبي عربي"

puts PI
puts MAX_USERS
puts APP_NAME
```

الناتج:
```
3.14159
100
روبي عربي
```

### لماذا نستخدم الثوابت؟

1. **قيم ثابتة رياضياً:** مثل π (باي) أو سرعة الضوء
2. **إعدادات التطبيق:** مثل اسم التطبيق أو الإصدار
3. **حدود قصوى:** مثل الحد الأقصى للمستخدمين أو حجم الملف
4. **قيم مرجعية:** مثل أسماء الأشهر أو أيام الأسبوع

```ruby
# أمثلة على استخدامات الثوابت
VERSION = "2.0"
DEFAULT_LANGUAGE = "العربية"
DAYS_IN_WEEK = 7
MONTHS_IN_YEAR = 12

puts "الإصدار: " + VERSION
puts "عدد أيام الأسبوع: " + DAYS_IN_WEEK.to_s
```

الناتج:
```
الإصدار: 2.0
عدد أيام الأسبوع: 7
```

### تحذير عند تغيير الثوابت

روبي تُحذّرك إذا حاولت تغيير قيمة الثابت، لكنها لا تمنعك تماماً:

```ruby
MAX_SCORE = 100
puts MAX_SCORE

# روبي ستُظهر تحذيراً!
MAX_SCORE = 200
puts MAX_SCORE
```

الناتج:
```
100
200
```

ستظهر رسالة تحذير: `warning: already initialized constant MAX_SCORE`

> **نصيحة:** تعامل مع الثوابت كقيم لا يجب تغييرها أبداً، حتى لو سمحت روبي بذلك تقنياً.

### اصطلاحات تسمية الثوابت

```ruby
# الطريقة الشائعة: كل الحروف كبيرة مع شرطة سفلية
MAX_FILE_SIZE = 1024
DATABASE_NAME = "production"
API_KEY = "abc123"

# يمكن أيضاً البدء بحرف كبير فقط (للأصناف والوحدات)
# هذا ثابت أيضاً!
MyClass = "example"
```

## الرموز (Symbols)

**الرمز** (Symbol) هو نوع خاص من البيانات في روبي. يبدأ بنقطتين `:` ويُستخدم كـ"علامة" أو "اسم" ثابت:

```ruby
status = :active
role = :admin
language = :arabic

puts status
puts role
puts language
```

الناتج:
```
active
admin
arabic
```

### الفرق بين الرموز والنصوص

قد تتساءل: ما الفرق بين `:active` و `"active"`؟ هناك فروقات مهمة:

```ruby
# النصوص: كل واحد منهم كائن منفصل في الذاكرة
name1 = "أحمد"
name2 = "أحمد"
puts name1.object_id
puts name2.object_id
puts name1.object_id == name2.object_id

puts "---"

# الرموز: نفس الكائن في الذاكرة دائماً
symbol1 = :active
symbol2 = :active
puts symbol1.object_id
puts symbol2.object_id
puts symbol1.object_id == symbol2.object_id
```

الناتج:
```
60
80
false
---
3331228
3331228
true
```

لاحظ أن:
- النصان `"أحمد"` لهما `object_id` مختلف (كائنان منفصلان)
- الرمزان `:active` لهما نفس `object_id` (نفس الكائن!)

### كفاءة الذاكرة

الرموز أكثر كفاءة في استخدام الذاكرة لأن روبي تُنشئ الرمز مرة واحدة فقط:

```ruby
# الرموز ثابتة - تُنشأ مرة واحدة
# نفس الكائن 10 مرات
10.times { :my_symbol }

# النصوص تُنشأ كل مرة
10.times { "my_string" } # 10 كائنات مختلفة!
```

### متى نستخدم الرموز؟

1. **مفاتيح القواميس (Hashes):**
```ruby
user = {
  :name => "سارة",
  :age => 25,
  :city => "دبي"
}
puts user[:name]
puts user[:age]
```

الناتج:
```
سارة
25
```

2. **حالات ثابتة:**
```ruby
# بدلاً من "pending"
status = :pending

if status == :pending
  puts "في الانتظار"
elsif status == :approved
  puts "تمت الموافقة"
elsif status == :rejected
  puts "مرفوض"
end
```

الناتج:
```
في الانتظار
```

3. **أسماء الدوال والخصائص:**
```ruby
# الرموز تُستخدم داخلياً في روبي للدوال
puts "مرحباً".respond_to?(:upcase)
puts "مرحباً".respond_to?(:unknown_method)
```

الناتج:
```
true
false
```

### تحويل بين النصوص والرموز

يمكنك التحويل بين النصوص والرموز بسهولة:

```ruby
# من نص إلى رمز
text = "hello"
symbol = text.to_sym
puts symbol
puts symbol.class

puts "---"

# من رمز إلى نص
sym = :world
string = sym.to_s
puts string
puts string.class
```

الناتج:
```
hello
Symbol
---
world
String
```

## مقارنة: الثوابت vs الرموز

| الميزة | الثوابت (Constants) | الرموز (Symbols) |
|--------|---------------------|------------------|
| الصياغة | `MAX_VALUE = 100` | `:max_value` |
| الاستخدام | تخزين قيم ثابتة | علامات ومفاتيح |
| التغيير | تحذير عند التغيير | لا يمكن تغييرها |
| النوع | أي نوع (رقم، نص، إلخ) | Symbol دائماً |
| الذاكرة | حسب نوع القيمة | كفاءة عالية |

## مثال عملي: إعدادات تطبيق

```ruby
# ثوابت للإعدادات الأساسية
APP_NAME = "متجر روبي"
VERSION = "1.0.0"
MAX_PRODUCTS = 1000

# رموز للحالات
current_status = :open
payment_method = :credit_card

puts "اسم التطبيق: " + APP_NAME
puts "الإصدار: " + VERSION
puts "الحد الأقصى للمنتجات: " + MAX_PRODUCTS.to_s
puts "الحالة: " + current_status.to_s
puts "طريقة الدفع: " + payment_method.to_s
```

الناتج:
```
اسم التطبيق: متجر روبي
الإصدار: 1.0.0
الحد الأقصى للمنتجات: 1000
الحالة: open
طريقة الدفع: credit_card
```

## نصائح مهمة

1. **استخدم الثوابت للقيم التي لا تتغير طوال تشغيل البرنامج**
2. **استخدم الرموز بدلاً من النصوص عندما تحتاج لـ"علامات" ثابتة**
3. **الرموز أسرع في المقارنة من النصوص**
4. **الثوابت يجب أن تبدأ بحرف كبير، والاصطلاح هو SCREAMING_SNAKE_CASE**
5. **الرموز لا يمكن تغييرها - هي ثابتة بطبيعتها**

## تمرين: الثوابت والرموز

حان وقت التطبيق! في محرر الشيفرة على اليسار:

**المطلوب:**
1. عرّف ثابتاً باسم `COUNTRY` يحتوي على "مصر"
2. عرّف ثابتاً باسم `POPULATION` يحتوي على 100000000
3. عرّف متغيراً باسم `status` يحتوي على الرمز `:active`
4. عرّف متغيراً باسم `language` يحتوي على الرمز `:arabic`
5. اطبع كل قيمة باستخدام puts

الناتج المتوقع:
```
مصر
100000000
active
arabic
```

> **تلميح:** الثوابت تُكتب بحروف كبيرة، والرموز تبدأ بنقطتين `:` !

---

> **تذكّر:** الثوابت للقيم التي لا تتغير، والرموز للعلامات والمفاتيح الثابتة. كلاهما يجعل شيفرتك أوضح وأكثر كفاءة!
